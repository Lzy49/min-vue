# vue3 是如何运行的
1. 调用 createApp 函数 在函数中传入 一个 组件 
2. createApp 运行 -> 创建一个 app 对象
   1. _component： 利用 createApp 传入的 vue 组件 生成 一个 
   2. mount：绑定DOM函数
      1. 生成虚拟根节点
         1. mount 函数 接收一个 `rootContainer` 根DOM
         2. 利用 `rootContainer` 获取到实际DOM
         3. 生成vnode
      2. render
         1. 调用 path 循环处理每一个传入的节点。
            1. 给予 type 做类型区分
               1. 文字 直接处理
               2. 组件 mountComponent 处理
                  1. 创建 component instance 对象
                  2. 处理 setup component
                     1. 初始化 props
                     2. 初始化 slots
                     3. 调用 setup() 拿到返回值处理
                        1. 创建代理对象 , 绑定到 instance 对象
                        2. 创建上下文对象（props,data,)
                        3. 执行 setup 返回一个值
                           1. object 将对象 生成一个代理对象 赋值给 上下文对象 （解构ref）
                           2. 函数 当作 render 函数
                     4. 寻找 render 函数，进行解包
               3. el 调用创建方法创建并绑定在其父节点上（最上层绑定在 mount 接收节点上）
               4. 子节点 ，递归调用 path 
   3. 渲染成功
## 函数调用
 1. 入口调用 createApp 接收一个根组件 返回一个 mount 事件
 1. 在调用 Mount 事件时 进行 根组件初始化 -> 虚拟DOM -> 挂载的过程
    1. 调用 createVnode 初始化 根组件 转换为虚拟DOM （ 这个虚拟DOM可能是一个 Component 也可能是一个 Element）
       1. 创建 type 表示 element 
       2. 创建 props 表示 上层传来的值
       3. 创建 children 表示 子元素
       4. 创建 shapeFlag 为 类型 使用 shapeFlags 思想 利用二进制数做多类型并处理
    2. 调用 render 函数 对 createVnode 初始化的 vnode 进行一个处理 调用 path 函数处理
      1. 区分下是 Component 组件 还是 Element 组件
        1. Component 组件 调用 processComponent 处理
          1. 创建 主要的流程 利用 mountComponent 来处理 option 的内容，处理实例
            1. 利用 createComponentInstance 创建实例
               1. initEmit 来对 emit 函数进行一个初始化
            2. 利用 setupComponent 处理 setup 
              1. setupStatefulComponent 将 setup 转换为状态 
                 1. 为 render ，生命周期，绑定 this
                 2. componentPublicInstance 使用 Proxy 代理来处理 需要的内容。
              2. handlerSetupResult 处理 setup 的返回值 
              3. finishSetupComponent 将 render 绑定在 instance 上
            3. 处理好这个 Component vnode 以后 传给 path 继续处理。
               1. 此时 该 组件从一个 Component -> vnode 组件
               2. 进行 path 判断 进入 vnode 渲染流程 processElement 
                  1. processElement 调用 mountElement 来初始化 DOM
                     1. 处理 DOM type
                     2. 处理 DOM props
                        1. 对以on开头的 key 使用 addEventListener 绑定事件
                        2. 对一些属性 直接 用 setAttribute 来绑定
                     3. 处理 DOM children 
                        1. 文字类型： 直接渲染
                        2. 数组类型： mountChildren 循环 传入 path 进行渲染